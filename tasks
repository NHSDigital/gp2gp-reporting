#!/bin/bash

set -Eeo pipefail

command="$1"

case "${command}" in
  test)
      npm install
      npm run test
      ;;
  dojo-test)
      dojo "./tasks test"
      ;;
  build)
      npm install
      npm run build
      ;;
  dojo-build)
      dojo "./tasks build"
      ;;
  get-metrics)
      npm install
      npm run getMetrics
      ;;
  dojo-get-metrics)
      dojo "./tasks get-metrics"
      ;;
  deploy)
      npm install
      npm run deploy
      ;;
  dojo-deploy)
      dojo "./tasks deploy"
      ;;
  *)
      echo "Invalid command: '${command}'"
      exit 1
      ;;
esac

set +e
